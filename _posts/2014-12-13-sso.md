---
layout: post
title: "收集服务器架构之四 [单点登录sso原理通俗解释]"
description: ""
category:
tags: [sso]
---
{% include JB/setup %}     
不论什么类型的网站，到一定规模后，就会面临这个问题，多个不同的应用系统中，用户能不能只登录一次，就可以访问所有应用资源。下面说一下sso单点登录系统的原理以及身份验证的流程：    
       

<img src="https://raw.githubusercontent.com/arkulo56/arkulo56.github.com/master/images/dandian.gif" width="500" />    

1. 浏览器请求入口服务器（分发的服务器），如果发现是请求需要登录的应用服务，则进行转发，讲请求转发至CAS服务器（身份验证服务）。
2. 这时候用户在浏览器端看到的是登录页面，这个页面是由CAS服务器提供，这个页面采用https链接
3. 验证用户信息正确后，CAS服务器将用户重新引导至入口服务器，并在请求的URL上加上一个ticket，作为门票   
4. 入口服务器将请求转发至应用服务器，应用服务器通过https链接地址验证ticket门票的有效性，如果验证成功，就可以返回相应的数据了    

tips：    

1. CAS服务器有可能被聪明人直接访问哦，安全性还是很重要的，https还是很有必要的    
2. 入口服务器可以用负载均衡服务器，例如nginx    
3. 所有的用户数据不需要统一保存在CAS服务器上，还是有数据层的     
4. CAS服务器也可以是多台服务器，采用协议同步到台服务器之间的数据即可，或者分布式？    